<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SVG Rotation on Mouse Move</title>
  <style>
    svg {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 700" width="700" height="700">
    <!-- First purple rectangle, adjusted to avoid red areas -->
    <rect x="10" y="200" width="340" height="80" fill="purple" stroke="black" stroke-width="2"/>
    
    <!-- Purple circle -->
    <circle cx="350" cy="240" r="40" fill="purple" stroke="black" stroke-width="2"/>
    
    
    <!-- Rotated second purple rectangles with varying transparency -->
    <g id="rotating-group" transform="translate(350, 240)">
      <g id="second-strand">
        <rect x="0" y="-40" width="140" height="80" fill="purple"/>
        <path d="M0,-40 L140,-40 L140,40 L0,40 Z" fill="none" stroke="black" stroke-width="2"/>
        <path d="M0,-39 L0,39" stroke="purple" stroke-width="4"/>
      </g>
    </g>
  </svg>
  <script>
    const svg = document.querySelector('svg');
    const rotatingGroup = document.getElementById('rotating-group');
    const secondStrand = document.getElementById('second-strand');
    let isMousePressed = false;
    svg.addEventListener('mousedown', () => {
      isMousePressed = true;
    });
    svg.addEventListener('mouseup', () => {
      isMousePressed = false;
    });
    svg.addEventListener('mousemove', (event) => {
      if (!isMousePressed) return;
      const bbox = svg.getBoundingClientRect();
      const mouseX = event.clientX - bbox.left;
      const mouseY = event.clientY - bbox.top;
      // Calculate angle and distance
      const angle = Math.atan2(mouseY - 240, mouseX - 350) * (180 / Math.PI);
      const distance = Math.sqrt(Math.pow(mouseX - 350, 2) + Math.pow(mouseY - 240, 2));
      // Round angle and distance to nearest 10
      const roundedAngle = Math.round(angle / 10) * 10;
      const roundedDistance = Math.max(40, Math.round(distance / 10) * 10); // Minimum length of 40
      // Update second strand
      secondStrand.querySelector('rect').setAttribute('width', roundedDistance);
      secondStrand.querySelector('path').setAttribute('d', `M0,-40 L${roundedDistance},-40 L${roundedDistance},40 L0,40 Z`);
      secondStrand.setAttribute('transform', `rotate(${roundedAngle})`);
      // Update other strands
      const rects = rotatingGroup.querySelectorAll('g:not(#second-strand)');
      rects.forEach((rect) => {
        rect.setAttribute('opacity', '0');
      });
    });
    // Create additional rectangles (strands)
    for (let i = 1; i < 12; i++) {
      const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
      g.innerHTML = `
        <rect x="0" y="-40" width="140" height="80" fill="purple"/>
        <path d="M0,-40 L140,-40 L140,40 L0,40 Z" fill="none" stroke="black" stroke-width="2"/>
        <path d="M0,-38 L0,40" stroke="white" stroke-width="2"/>
      `;
      g.setAttribute('opacity', '0');
      rotatingGroup.appendChild(g);
    }
  </script>
</body>
</html>